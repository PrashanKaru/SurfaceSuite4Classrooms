<% include ../layouts/header.ejs %>
<style>
  body {
    padding-top: 50px;
  }

  h1 {
    margin-bottom: 20px;
    padding-bottom: 9px;
    border-bottom: 1px solid #eee;
  }

  .sidebar {
    position: fixed;
    top: 51px;
    bottom: 0;
    left: 0;
    z-index: 1000;
    padding: 20px;
    overflow-x: hidden;
    overflow-y: auto;
    /* Scrollable contents if viewport is shorter than content. */
    border-right: 1px solid #eee;
  }

  .placeholders {
    padding-bottom: 3rem;
  }

  .placeholder img {
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
  }
</style>
</head>

<body>
  <nav class="navbar navbar-expand-md navbar-light fixed-top bg-inverse" style="background-color: #e3f2fd;">
    <button class="navbar-toggler navbar-toggler-right hidden-lg-up" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/">Dashboard</a>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <li>
            <a class="nav-link" href="/startgame">Start New Game</a>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#">Manage
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#">Help</a>
          </li>
      </ul>
    </div>
  </nav>
  </br>

  <div class="container-fluid ">
    <h1>Dashboard</h1>

    <div class="row col-sm-10 offset-sm-1 border">
      <h2 style="padding:0.25em; padding-top:0.5em">Students</h2>
      <div class="table-responsive">
        <% if (data) { %>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Surname</th>
                <th>First Name</th>
                <th>Score</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <% data.forEach(function(student){ %>
                <tr>
                  <td class="align-middle text-capitalize">
                    <%= student.first_name %>
                  </td>
                  <td class="align-middle text-capitalize">
                    <%= student.last_name %>
                  </td>
                  <td class="align-middle text-capitalize">
                    <%= student.score %>
                  </td>
                  <td>
                    <a href="dashboard/<%= student.student_id %>"  method="get" class="btn btn-info" role="button" data-toggle="tooltip" title="View more information">Info</a>
                  </td>
                </tr>
                <% }) %>
            </tbody>
          </table>
      </div>
      
      <% } else {%>
        <div class="card bg-danger text-white">
          <div class="card-body">Error: No students found</div>
        </div>
        <% }%>
      <table class="table table-striped">
          <tbody>
            <form class="form-inline " action="/dashboard/add" method="post" name="form1">
              <td>
                <div>
                  <input type="text" class="form-control" placeholder="First Name" name="first_name" value="<%= first_name %>">
                </div>
              </td>
              <td>
                <div>
                  <input type="text" class="form-control" placeholder="Last Name" name="last_name" value="<%= last_name %>">
                </div>
              </td>
              <td>
                <div>
                  <button class="btn btn-success" type="submit" value="Add">Create</button>
                </div>
              </td>
            </form>
          </tbody>
        </table>
    </div>
  </div>
  </div>
  <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
    crossorigin="anonymous"></script>
  <script>
    window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function () {
      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>
</body>

</html>